@model IEnumerable<CommentViewModel>

@{
    ViewData["Title"] = "Всички коментари";
}

<h2 id="title" class="text-center">@ViewBag.Title</h2>
<hr />

@if (!Model.Any())
{
    <h2 id="title" class="text-center">Няма оставени коментари!</h2>
}

else
{
    <div class="row">
        @foreach (var c in Model)
        {
            <div class="container" style="display:inline">
                <div class="row">

                    <div class="card col-6 border-1">
                        <p class="h5">Идентификатор на картината: <b>@c.PictureId</b></p>
                        <p></p>
                        <p class="h5">Идентификатор на коментара: <b>@c.CommentId</b></p>
                        <p></p>
                        <p class="h5">Име на потребителя: <b>@c.Username</b></p>
                        <p></p>
                        <p class="h5">Коментар: <b>@c.Content</b></p>
                    </div>
                    @*<a href="#" class="delete-comment" data-comment-id="@c.CommentId">Изтрий коментара</a>*@
                    @*<button class="btn-delete" data-id="@c.CommentId">Изтрий</button>*@
                    <form asp-controller="Comment" asp-action="Delete" asp-route-commentId="@c.CommentId">
                        <input type="submit" value="Изтрий"
                               class="btn btn-secondary m-2" 
                               onclick="return confirm('Наистина ли искате да изтриете този коментар ?')" />
                    </form>
                </div>
            </div>
            <p></p>
        }
    </div>
}

@*@section Scripts {
    <script>
        // Когато се зареди документа, прикрепяме събитието click на всички бутони с клас "delete-comment"
        document.addEventListener("DOMContentLoaded", function () {
            var deleteButtons = document.getElementsByClassName("delete-comment");
            for (var i = 0; i < deleteButtons.length; i++) {
                deleteButtons[i].addEventListener("click", onDeleteCommentClick);
            }
        });

        function onDeleteCommentClick(event) {
            event.preventDefault(); // Предотвратява натискането на връзката
            var commentId = event.target.dataset.CommentId; // Вземаме идентификатора от data-comment-id атрибута
            if (confirm("Сигурни ли сте, че искате да изтриете този коментар beee?")) {
                // Тук можете да изпратите заявката за изтриване към сървъра, например чрез fetch или друг подходящ механизъм
                // Например:
                 fetch("/Admin/Comment/Delete/" + commentId, { method: "POST" })
                     .then(response => {
                         // Обработка на отговора от сървъра
                         if (response.ok) {
                             // Успешно изтриване - пренасочване към списъка с коментари или друга обработка
                         } else {
                             // Грешка при изтриването - обработка на грешката
                         }
                     })
                     .catch(error => {
                         // Грешка при изпълнението на заявката - обработка на грешката
                     });
            }
        }
    </script>
}*@